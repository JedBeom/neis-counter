<!doctype html>
<html lang="ko">
    <head>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <meta name="description" content="ë‚˜ì´ìŠ¤(NEIS) ê¸€ììˆ˜ ê³„ì‚°ê¸°">
    <meta property="og:title" content="ë‚˜ì´ìŠ¤(NEIS) ê¸€ììˆ˜ ê³„ì‚°ê¸°">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://jedbeom.github.io/neis-counter">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:description" content="ë‚˜ì´ìŠ¤(NEIS) ê¸€ììˆ˜ ê³„ì‚°ê¸°">
    <meta property="og:image" content="ogimage.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <link rel="stylesheet" type="text/css" href="main.css">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>ë‚˜ì´ìŠ¤(NEIS) ê¸€ììˆ˜ ê³„ì‚°ê¸°</title>
    </head>
    <body>
        <div class="center">
            <div class="title">ğŸ´ë‚˜ì´ìŠ¤(NEIS) ê¸€ììˆ˜ ê³„ì‚°ê¸° (í¬í¬ ë²„ì „)</div>
            <p>ì›ë³¸ ì‚¬ì´íŠ¸ì˜ ì´ì „ ë²„ì „ì„ ìœ ì§€í•©ë‹ˆë‹¤. (ë§ì¶¤ë²• ê¸°ëŠ¥ X)</p>
            <div class="title_underbar_wrapper">
            <div class="title_underbar"></div>
            </div>
            <textarea oninput="onInput()" id="counter" class="counter" cols="40" rows="5"></textarea>
            <table>
                    <tr>
                        <th>í•­ëª©</td>
                        <th>ììœ¨í™œë™</th>
                        <th>ë™ì•„ë¦¬í™œë™</th>
                        <th>ì§„ë¡œí™œë™</th>
                        <th>êµê³¼ì„¸íŠ¹</th>
                        <th>ê°œì¸ë³„ì„¸íŠ¹</th>
                    </tr>
                    <tr>
                        <td>ë°”ì´íŠ¸</td>
                        <td>1500Bytes</td>
                        <td>1500Bytes</td>
                        <td>2100Bytes</td>
                        <td>1500Bytes</td>
                        <td>1500Bytes</td>
                    </tr>
            </table>
            <div id="result">
                <p id="count-selection">sdf</p>
                <p id="count-all">0ì, 0ë°”ì´íŠ¸</p>
            </div>
            <span style="font-size: 12pt; color:#aaa; font-family: 'Noto Sans KR'; letter-spacing: -1.25px; float: right; text-align: right;">ì˜ì–´, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì, ë„ì–´ì“°ê¸° 1ë°”ì´íŠ¸ / ì—”í„°í‚¤ 2ë°”ì´íŠ¸ / í•œê¸€ 3ë°”ì´íŠ¸</span>
        </div>
        <div class="footbar">
        <div class="footbar_content">
            <span style="text-align: left;">Original work by <a href="https://github.com/hjh010501/">kidevelop</a></span> |
            <span style="text-align: left;">Fork by <a href="https://github.com/JedBeom/">JedBeom</a></span>
        </div>
        </div>
        <script>
        var textarea = document.getElementById('counter')
        var countAll = document.getElementById('count-all')
        var countSelection = document.getElementById('count-selection')

        function init() {
            let content = localStorage.getItem("save")
            if (content) {
                textarea.value = content
                onInput()
            }
        }

        function countByte(content) {
            var english = content.replace(/[ã„±-ã…|ã…-ã…£|ê°€-í£]/gi, "").replace(/[0-9]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/\s/gi, "").replace(/\s/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");;
            var korean = content.replace(/[a-zA-Z]/gi, "").replace(/[0-9]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/\s/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");
            var number = content.replace(/[a-zA-Z]/gi, "").replace(/[ã„±-ã…|ã…-ã…£|ê°€-í£]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/\s/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");
            var special = content.replace(/[a-zA-Z]/gi, "").replace(/[ã„±-ã…|ã…-ã…£|ê°€-í£]/gi, "").replace(/[0-9]/gi, "").replace(/\s/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");
            var space =  content.replace(/[a-zA-Z]/gi, "").replace(/[ã„±-ã…|ã…-ã…£|ê°€-í£]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/[0-9]/gi, "").replace(/(\r\n\t|\n|\r\t)/gm,"");
            var line = content.replace(/[a-zA-Z]/gi, "").replace(/[ã„±-ã…|ã…-ã…£|ê°€-í£]/gi, "").replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi, "").replace(/[0-9]/gi, "").replace(/ /gi, "");
            return english.length + (korean.length * 3) +  number.length + special.length + space.length + (line.length * 2);
        }

        function onInput() {
            let content = textarea.value

            localStorage.setItem("save", content);
            var byte = countByte(content)
            countAll.innerHTML = content.length + "ì, " + byte + "ë°”ì´íŠ¸";
        }    

        window.onload = init;

        function getSelectionText() {
            var text = "";
            var activeEl = document.activeElement;
            var activeElTagName = activeEl ? activeEl.tagName.toLowerCase() : null;
            if (activeElTagName == "textarea") {
                text = activeEl.value.slice(activeEl.selectionStart, activeEl.selectionEnd);
            }
            return text;
        }

        document.onmouseup = document.onkeyup = document.onselectionchange = function() {
            var text = getSelectionText()
            if (!text) {
                countSelection.innerHTML = ""
                return
            }
            countSelection.innerHTML = "ì„ íƒëœ í…ìŠ¤íŠ¸: " + text.length + "ì, " + countByte(text) + "ë°”ì´íŠ¸";
        };
        </script>
    </body>
</html>
